# Oauth client configuration specifics
config:
  # OAuth client ID
  clientID: "oidc-istio"
  # OAuth client secret
  clientSecret: "wB5faI6fCvee9tn81HQwaThOLnGOVpyt"
  # Create a new secret with the following command
  # openssl rand -base64 32 | head -c 32 | base64
  # Use an existing secret for OAuth2 credentials (see secret.yaml for required fields)
  # Example:
  # existingSecret: secret
  cookieSecret: "88K2sc_CAM6LNo2pE3x4-m1V618UFi3B_MQfiixXxN0="
  # Default configuration, to be overridden
  configFile: |-
    http_address="0.0.0.0:4180"
    email_domains=["*"]
    cookie_secret="88K2sc_CAM6LNo2pE3x4-m1V618UFi3B_MQfiixXxN0="
    cookie_secure="false"
    upstreams="https://httpbin.zirain.info"
    cookie_domains=[".zirain.info"] # Required so cookie can be read on all subdomains.
    whitelist_domains=[".zirain.info"] # Required to allow redirection back to original requested target.

    # keycloak provider
    client_secret="wB5faI6fCvee9tn81HQwaThOLnGOVpyt"
    client_id="oidc-istio"
    redirect_url="https://oauth2-proxy.zirain.info/oauth2/callback"

    # in this case oauth2-proxy is going to visit
    # https://keycloak.zirain.info/realms/master/.well-known/openid-configuration for configuration
    oidc_issuer_url="https://keycloak.zirain.info/realms/istio-oauth"
    provider="oidc"
    provider_display_name="Keycloak"
    ssl_insecure_skip_verify="true"

## PodDisruptionBudget settings
## ref: https://kubernetes.io/docs/concepts/workloads/pods/disruptions/
podDisruptionBudget:
  enabled: false
  minAvailable: 1

# whether to use http or https
httpScheme: http
